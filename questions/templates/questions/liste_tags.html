{% extends 'base.html' %}
{% block content %}

<h2 class="page-title">ðŸŽ¯ Tags disponibles</h2>

<!-- Barre sticky des tags -->
<div class="sticky-tags-header">
    {% for tag in tags %}
        <a href="#" class="tag-item" data-tag-id="{{ tag.id }}">
            <i class="fas fa-tag"></i> {{ tag.nom }}
        </a>
    {% endfor %}
</div>

<!-- Conteneur dynamique pour les questions liÃ©es -->
<div id="questions-par-tag-container"></div>

<!-- JS intÃ©grÃ© -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    const tagLinks = document.querySelectorAll(".tag-item");
    const container = document.getElementById("questions-par-tag-container");
    let activeTagId = null;

    tagLinks.forEach(link => {
        link.addEventListener("click", function (e) {
            e.preventDefault();
            const tagId = this.dataset.tagId;

            // Si on reclique sur le mÃªme tag â†’ on ferme
            if (activeTagId === tagId) {
                container.innerHTML = "";
                activeTagId = null;
                tagLinks.forEach(l => l.classList.remove("tag-item-selected"));
            } else {
                fetch(`/questions/fragment/tag/${tagId}/`)
                    .then(response => response.text())
                    .then(html => {
                        container.innerHTML = html;
                        activeTagId = tagId;

                        // Mise Ã  jour du style actif
                        tagLinks.forEach(l => l.classList.remove("tag-item-selected"));
                        this.classList.add("tag-item-selected");
                    });
            }
        });
    });
});
</script>

{% endblock %}
