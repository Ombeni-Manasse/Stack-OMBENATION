{% extends 'base.html' %}


{% block content %}

<h2 class="page-title">{{ titre_page }}</h2>

{% if questions %}
    {% for question in questions %}
        <div class="question-box {% if questions_resolues.question.id %}question-resolue{% endif %}">
            <div class="question-box-header">
                <h3 class="question-title">{{ question.titre }}</h3>
                <a href="{% url 'questions:detail_question' question.id %}" class="question-detail-link">
                    <i class="fas fa-arrow-right"></i> Voir détails
                </a>
            </div>
            <p class="question-extrait">{{ question.contenu|truncatewords:30 }}</p>
            <p class="meta-info">
                Publiée le {{ question.date_publication|date:"d M Y à H:i" }}
                • 💬 {{ question.reponses.count }} réponse{{ question.reponses.count|pluralize }}
                • 👍 Score : {{ question.score|default:"0" }}
            </p>
        </div>
    {% endfor %}

    <div class="pagination-wrapper">
        {% if questions.has_previous %}
            <a href="?page={{ questions.previous_page_number }}">⏮️ Page précédente</a>
        {% endif %}
        <span>Page {{ questions.number }} / {{ questions.paginator.num_pages }}</span>
        {% if questions.has_next %}
            <a href="?page={{ questions.next_page_number }}">Page suivante ⏭️</a>
        {% endif %}
    </div>
{% else %}
    <p class="empty-message">🚫 Aucune question à afficher.</p>
{% endif %}

{% endblock %}
